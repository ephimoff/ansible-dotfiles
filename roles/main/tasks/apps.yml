# - name: Ensure that Karabiner directory exists
#   file:
#     path: "{{general.local_home}}/.config/karabiner"
#     state: directory
#     mode: 0755

- name: symlink Karabiner-Elements prefs
  file:
    src: "{{general.local_home}}/Projects/ansible-dotfiles/files/karabiner/karabiner"
    dest: "{{general.local_home}}/.config/karabiner"
    state: link
    force: yes

- name: Ensure that Spectacle directory exists
  file:
    path: "{{general.local_home}}/Library/Application\ Support/Spectacle"
    state: directory
    mode: 0755

- name: symlink Spectacle prefs
  file:
    src: "{{general.local_home}}/Projects/ansible-dotfiles/files/spectacle/Shortcuts.json"
    dest: "{{general.local_home}}/Library/Application\ Support/Spectacle/Shortcuts.json"
    state: link
    force: yes

- name: Ensure that VS Code directory exists
  file:
    path: "{{general.local_home}}/Library/Application\ Support/Code/User"
    state: directory
    mode: 0755

- name: install VS Code extensions
  shell: "code --install-extension {{ item }}"
  with_items: "{{ extensions }}"


- name: symlink VS Code prefs
  file:
    src: "{{general.local_home}}/Projects/ansible-dotfiles/files/vscode/{{ item }}"
    dest: "{{general.local_home}}/Library/Application\ Support/Code/User/{{ item }}"
    state: link
    force: yes
  with_items:
    - settings.json
    - keybindings.json
    - projects.json
    - snippets

- name: open terminal Snazzy theme
  shell: "open {{general.local_home}}/Projects/ansible-dotfiles/files/terminal/Snazzy.terminal"

